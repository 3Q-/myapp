"use strict";function t(){var e=$(".chat-body"),t=e.prop("scrollHeight");e.prop("scrollTop",t)}function n(e,n,r){var i=$(".msg-list-body");r=QxEmotion.Parse(r),i.append('<div class="clearfix msg-wrap"><div class="msg-head"><span class="msg-name label label-primary pull-left"><span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;'+e+"</span>"+'<span class="msg-time label label-default pull-left">'+'<span class="glyphicon glyphicon-time"></span>&nbsp;&nbsp;'+n+"</span>"+'</div><div class="msg-content">'+r+"</div></div>"),t()}function r(e,n){var r=$(".msg-list-body");n=QxEmotion.Parse(n),r.append('<div class="clearfix msg-wrap"><div class="msg-head"><span class="msg-name label label-danger pull-left"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;&nbsp;\u7cfb\u7edf\u6d88\u606f</span><span class="msg-time label label-default pull-left"><span class="glyphicon glyphicon-time"></span>&nbsp;&nbsp;'+e+"</span>"+'</div><div class="msg-content">'+n+"</div></div>"),t()}function i(e){$
(".list-table tr").each(function(){e==$(this).find("td").text()&&$(this).remove()})}function s(e){$(".list-table").append("<tr><td>"+e+"</td></tr>")}function o(e){$(".list-table").html("");var t;for(t=0;t<e.length;t++)s(e[t]);u()}function u(){var e=$(".list-table").find("tr").length+1;$("#list-count").text("\u5f53\u524d\u5728\u7ebf\uff1a"+e+"\u4eba")}function a(){if(!$.cookie("chat_nickname")){$("#login-modal").modal("show");return}var e=$("#input-edit"),t=e.val();if(""===t)return;say(t),e.val("")}function f(){var e=$("#nickname-edit"),t=$("#nickname-error"),n=e.val();if(""===n){t.text("\u8bf7\u586b\u5199\u6635\u79f0\u3002"),t.show(),e.focus();return}var r=getStringLength(n);if(r<4||r>16){t.text("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u6635\u79f0\uff0c\u5e94\u4e3a4\u523016\u4e2a\u5b57\u7b26\u3002"),t.show();return}n==$.cookie("chat_nickname")&&(t.text("\u4f60\u672c\u6765\u5c31\u53eb\u8fd9\u4e2a\u3002"),t.show()),changeNickname(n),Notify.request()}function l(){$("#login-modal").modal("show"
)}var e=!1;$("div[role='dialog']").on("show.bs.modal",function(){$(this).css({display:"block","margin-top":function(){return $(this).height()/3}})}),$("#login-modal").on("show.bs.modal",function(e){$("#nickname-edit").val(""),$("#nickname-error").hide()}),$("#login-modal").on("shown.bs.modal",function(e){$("#nickname-edit").focus()}),$("#input-edit").keydown(function(e){13===e.keyCode&&a()}),$("#nickname-edit").keydown(function(e){13===e.keyCode&&f()}),QxEmotion($("#emotion-btn"),$("#input-edit"));