"use strict";function n(e){t.emit("change_nickname",e)}function r(e){t.emit("say",e)}var e="http://"+location.hostname+":8888";console.log("server: "+e);var t=io.connect(e);t.on("need_nickname",function(){$.cookie("chat_nickname")?n($.cookie("chat_nickname")):$("#login-modal").modal("show")}),t.on("server_message",function(e){addServerMessage(getLocalHMS(),e)}),t.on("change_nickname_error",function(e){console.log("change_nickname_error : "+e),$("#login-modal").modal("show"),$("#nickname-error").text(e),$("#nickname-error").show(),$("#nickname-edit").focus()}),t.on("change_nickname_done",function(e,t){console.log("change_nickname_done("+t+","+e+")"),$.cookie("chat_nickname",t),$("#login-modal").modal("hide"),$("#my-nickname").html("\u6635\u79f0\uff1a"+t),e!==null&&e!==""&&addServerMessage(getLocalHMS(),"["+e+"] \u6539\u540d\u4e3a ["+t+"]"),updateListCount()}),t.on("say_done",function(e,t){console.log("user_say("+e+", "+t+")"),addMessage(e,getLocalHMS(),t)}),t.on("user_list",function(e){useUserList
(e)}),t.on("user_change_nickname",function(e,t){console.log("user_change_nickname("+e+", "+t+")"),removeListUser(e),addUserToList(t),addServerMessage(getLocalHMS(),"["+e+"] \u6539\u540d\u4e3a ["+t+"]")}),t.on("user_join",function(e){console.log("user_join("+e+")"),addUserToList(e),updateListCount(),addServerMessage(getLocalHMS(),"["+e+"] \u8fdb\u5165\u4e86\u804a\u5929\u5ba4\u3002")}),t.on("user_quit",function(e){console.log("user_quit("+e+")"),removeListUser(e),updateListCount(),addServerMessage(getLocalHMS(),"["+e+"] \u79bb\u5f00\u4e86\u804a\u5929\u5ba4\u3002")}),t.on("user_say",function(e,t){console.log("user_say("+e+", "+t+")"),addMessage(e,getLocalHMS(),t),"hidden"==document[GetVisibilityKey()]&&Notify.show({icon:"/img/qx_chat.png",title:"\u5343\u5bfb\u804a\u5929\u5ba4",message:e+"\uff1a"+t,autoclose:3,onclick:function(){window.focus(),undefined!==typeof this.colse?this.close():undefined!==typeof this.cancel&&this.cancel()}})});